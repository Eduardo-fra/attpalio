<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sistema de Pessoa</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #0d1117; color: #c9d1d9; display: flex; flex-direction: column; align-items: center; padding: 40px 20px; }
h1 { color: #58a6ff; margin-bottom: 30px; }
.form-container { display: none; background-color: #161b22; padding: 30px; border-radius: 12px; box-shadow: 0 0 20px #58a6ff30; width: 100%; max-width: 400px; }
.form-container p { margin-bottom: 15px; font-size: 14px; }
#inicio { display: block; }
input[type="text"], input[type="password"] { width: 100%; padding: 10px; background-color: #0d1117; border: 1px solid #30363d; border-radius: 6px; color: #c9d1d9; font-size: 14px; transition: 0.3s ease; }
input[type="text"]:focus, input[type="password"]:focus { border-color: #58a6ff; outline: none; box-shadow: 0 0 8px #58a6ff55; }
button { width: 100%; padding: 12px; margin-top: 10px; background: linear-gradient(145deg, #2385ff, #0a5cd8); color: white; border: none; border-radius: 6px; font-weight: bold; font-size: 14px; cursor: pointer; transition: background 0.3s ease, transform 0.1s ease; }
button:hover { background: linear-gradient(145deg, #3a9bff, #1271e0); transform: scale(1.03); }
#resposta { margin-top: 30px; background-color: #161b22; border-left: 4px solid #58a6ff; padding: 20px; border-radius: 8px; width: 100%; max-width: 600px; word-wrap: break-word; }
@media (max-width: 500px) { .form-container, #resposta { padding: 20px; } }
</style>
</head>
<body>
<h1>Sistema de Pessoa</h1>

<!-- Login -->
<div id="inicio">
    <p>Usuário (CPF): <input type="text" id="cpfLogin"></p>
    <p>Senha: <input type="password" id="senhaLogin"></p>
    <p><button onclick="logar()">Logar</button></p>
</div>

<!-- Formulário -->
<div class="form-container" id="form-container">
    <p>CPF: <input type="text" id="cpfForm"></p>
    <p>Nome: <input type="text" id="nomeForm"></p>
    <p>Contato: <input type="text" id="contatoForm"></p>
    <p>Senha: <input type="password" id="senhaForm"></p>
    <button onclick="inserir()">Inserir</button>
    <button onclick="atualizar()">Atualizar</button>
    <button onclick="apagar()">Apagar</button>
    <button onclick="consultar()">Consultar</button>
</div>

<div id="resposta"></div>

<script>
function logar(){
    var cpf = document.getElementById("cpfLogin").value;
    var senha = document.getElementById("senhaLogin").value;

    var req = new XMLHttpRequest();
    req.open("POST", "controllerPessoa.php?acao=validarPessoa&cpf="+cpf+"&senha="+senha, true);
    req.send();

    req.onload = function() {
        var res = JSON.parse(this.responseText);
        if(res.length>0){
            document.getElementById("inicio").style.display="none";
            document.getElementById("form-container").style.display="block";
            document.getElementById("resposta").innerHTML = "Login efetuado!";
            document.getElementById("cpfForm").value = res[0].cpf;
            document.getElementById("nomeForm").value = res[0].nome;
            document.getElementById("contatoForm").value = res[0].contato;
            document.getElementById("senhaForm").value = res[0].senha;
        } else {
            document.getElementById("resposta").innerHTML = "CPF ou senha inválidos!";
        }
    }
}

function inserir(){
    var cpf=document.getElementById("cpfForm").value;
    var nome=document.getElementById("nomeForm").value;
    var contato=document.getElementById("contatoForm").value;
    var senha=document.getElementById("senhaForm").value;

    var req=new XMLHttpRequest();
    req.open("GET","controllerPessoa.php?acao=inserir&cpf="+cpf+"&nome="+nome+"&contato="+contato+"&senha="+senha,true);
    req.send();
    req.onload=function(){ document.getElementById("resposta").innerHTML=this.responseText; }
}

function atualizar(){
    var cpf=document.getElementById("cpfForm").value;
    var nome=document.getElementById("nomeForm").value;
    var contato=document.getElementById("contatoForm").value;
    var senha=document.getElementById("senhaForm").value;

    var req=new XMLHttpRequest();
    req.open("GET","controllerPessoa.php?acao=atualizar&cpf="+cpf+"&nome="+nome+"&contato="+contato+"&senha="+senha,true);
    req.send();
    req.onload=function(){ document.getElementById("resposta").innerHTML=this.responseText; }
}

function apagar(){
    var cpf=document.getElementById("cpfForm").value;
    var req=new XMLHttpRequest();
    req.open("GET","controllerPessoa.php?acao=apagar&cpf="+cpf,true);
    req.send();
    req.onload=function(){ document.getElementById("resposta").innerHTML=this.responseText; }
}

function consultar(){
    var req=new XMLHttpRequest();
    req.open("POST","controllerPessoa.php?acao=consultar",true);
    req.send();
    req.onload=function(){
        var res=JSON.parse(this.responseText);
        var texto="";
        for(var i=0;i<res.length;i++){
            texto+="CPF: "+res[i].cpf+"<br>Nome: "+res[i].nome+"<br>Contato: "+res[i].contato+"<br>Senha: "+res[i].senha+"<br><br>";
        }
        document.getElementById("resposta").innerHTML=texto;
    }
}
</script>
</body>
</html>
